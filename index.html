<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>AidenNotes | Universal</title>

    <link rel="apple-touch-icon" href="https://filedn.eu/lmLPHhnmVT38F0vdFViDpAf/Notesapp/aidennotesicon.jpg">
    <link rel="icon" type="image/jpeg" href="https://filedn.eu/lmLPHhnmVT38F0vdFViDpAf/Notesapp/aidennotesicon.jpg">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AidenNotes">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">
    <style>
        :root { --oxblood: #1a0505; --crimson: #8b0000; --parchment: #f5e6d3; --ink: #0a0a0a; --silver: #a9a9a9; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        /* FIXED: Changed overflow: hidden to allow the main container to manage scroll */
        html, body { height: 100vh; margin: 0; padding: 0; background-color: var(--ink); color: var(--parchment); font-family: 'Playfair Display', serif; overflow: hidden; position: fixed; width: 100%; }
        
        .app-container { display: none; height: 100vh; width: 100vw; flex-direction: row; overflow: hidden; }
        
        /* SIDEBAR */
        #sidebar { width: 220px; background-color: var(--oxblood); border-right: 1px solid var(--crimson); display: flex; flex-direction: column; flex-shrink: 0; overflow-y: auto; z-index: 100; }
        .sidebar-item { padding: 12px; cursor: pointer; border-bottom: 1px solid rgba(139,0,0,0.1); font-family: 'Cinzel'; font-size: 0.7rem; display: flex; justify-content: space-between; align-items: center; }
        .sidebar-item:hover { background: var(--crimson); }
        .folder-content { padding-left: 10px; background: rgba(0,0,0,0.3); display: none; border-left: 2px solid var(--crimson); }

        @media (max-width: 600px) {
            .app-container { flex-direction: column; } 
            #sidebar { width: 100%; height: auto; max-height: 200px; border-right: none; border-bottom: 2px solid var(--crimson); display: block; flex-shrink: 0; }
            .sidebar-item { display: inline-flex; width: auto; min-width: 45%; margin: 1%; }
        }

        /* EDITOR - FIXED SCROLLING ENGINE */
        #main-editor { flex-grow: 1; display: flex; flex-direction: column; background: radial-gradient(circle at center, #1a0505 0%, #0a0a0a 100%); position: relative; overflow: hidden; height: 100%; }
        
        /* This is the key scrolling container */
        .scroll-content { 
            flex-grow: 1; 
            overflow-y: auto; 
            padding: 20px; 
            -webkit-overflow-scrolling: touch; /* Momentum scrolling for iOS */
            display: flex;
            flex-direction: column;
        }

        #note-title { width: 100%; background: transparent; border: none; color: var(--crimson); font-family: 'Cinzel'; font-size: 1.5rem; outline: none; flex-shrink: 0; margin-bottom: 10px; }
        
        .sub-title-toolbar { 
            display: flex; 
            gap: 5px; 
            flex-wrap: wrap; 
            padding: 10px 0; 
            border-bottom: 1px solid var(--crimson); 
            margin-bottom: 15px; 
            align-items: center; 
            flex-shrink: 0; 
            background: transparent;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .tool-btn, .tool-select { background: var(--ink); border: 1px solid var(--crimson); color: var(--parchment); padding: 7px; cursor: pointer; font-family: 'Cinzel'; font-size: 0.6rem; border-radius: 3px; user-select: none; }

        /* FIXED: Ensure body can grow as long as needed inside the scroll container */
        #note-body { 
            min-height: 80vh; 
            color: var(--parchment); 
            font-size: 1.1rem; 
            outline: none; 
            line-height: 1.6; 
            padding-bottom: 150px; /* Space for keyboard/comfort */
            word-wrap: break-word;
        }
        
        #note-body a { color: var(--crimson); text-decoration: underline; pointer-events: auto !important; }
        
        /* RELIC OBJECTS */
        .relic-container { display: inline-block; position: relative; margin: 30px 0; border: 1px solid rgba(139,0,0,0.5); min-width: 50px; min-height: 50px; touch-action: none; background: rgba(0,0,0,0.2); }
        .relic-container img { display: block; width: 100%; height: 100%; pointer-events: none; }
        .relic-table { width: 100%; height: 100%; border-collapse: collapse; background: rgba(0,0,0,0.6); table-layout: fixed; }
        .relic-table td { border: 1px solid var(--crimson); padding: 8px; outline: none; color: var(--parchment); }

        .table-menu { position: absolute; top: -38px; left: -1px; display: flex; gap: 3px; background: var(--crimson); padding: 5px; border-radius: 4px 4px 0 0; z-index: 110; width: max-content; }
        .drag-handle { background: #fff; color: #000; padding: 2px 6px; font-weight: bold; font-size: 10px; border-radius: 2px; cursor: move; }
        .menu-btn { background: var(--oxblood); border: none; color: white; font-size: 8px; padding: 4px; cursor: pointer; font-family: 'Cinzel'; }

        .resize-handle { position: absolute; bottom: 0; right: 0; width: 35px; height: 35px; cursor: nwse-resize; z-index: 120; display: flex; align-items: flex-end; justify-content: flex-end; padding: 5px; color: var(--crimson); font-weight: bold; font-size: 20px; }

        /* MODALS */
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 1001; }
        #folder-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--oxblood); border: 2px solid var(--crimson); padding: 25px; z-index: 1002; width: 90%; max-width: 350px; }
        #login-screen { position: fixed; inset: 0; background: var(--ink); z-index: 2000; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>
